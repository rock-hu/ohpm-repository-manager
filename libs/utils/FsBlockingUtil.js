"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.FsBlocking=void 0;const t=e(require("fs-extra")),r=e(require("fs")),c=e(require("path")),n=require("../packages/log"),a=require("../tools/json5");function i(e){r.default.existsSync(e)||t.default.mkdirpSync(e)}exports.FsBlocking={createDirSyncIfNotExists:i,copyDirSync:function e(t,n){if(!r.default.existsSync(t))throw new Error("copy a directory that does not exist");if(!r.default.statSync(t).isDirectory())throw new Error("source path is not a directory");i(n),r.default.readdirSync(t).forEach((a=>{const i=c.default.join(t,a),y=c.default.join(n,a);r.default.statSync(i).isDirectory()?e(i,y):r.default.copyFileSync(i,y,r.default.constants.COPYFILE_FICLONE)}))},rmEmptyDirSync:function(e){if(!r.default.existsSync(e))return;0===r.default.readdirSync(e).length&&(r.default.rmdirSync(e),n.OhpmLazyLogger.debug("",`Deleted empty directory ${e}`))},readJSON5Sync:function(e,t=""){try{const t=r.default.readFileSync(e,"utf8");return a.JSON5.parse(t)}catch(r){r.message=`${r.message} - check ${t||e.toString()} format.`,n.OhpmLazyLogger.error("",r.message)}},readJSONSync:function(e,r="utf-8"){try{return t.default.readJSONSync(e,r)}catch(t){throw n.OhpmLazyLogger.error("",`${t.message} - check ${e} format.`),""}},createFileSync:t.default.createFileSync,writeFileSync:r.default.writeFileSync,readdirSync:r.default.readdirSync,existsSync:r.default.existsSync,readFileSync:r.default.readFileSync,copyFileSync:r.default.copyFileSync,rmSync:r.default.rmSync,copySync:t.default.copySync,unlinkSync:r.default.unlinkSync,renameSync:r.default.renameSync,rmdirSync:r.default.rmdirSync,chmodSync:r.default.chmodSync};