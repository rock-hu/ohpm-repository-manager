"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.dealMainField=void 0;const n=require("./printChangeWarnLog"),t=require("../../../../../../utils/FsBlockingUtil"),i=e(require("path")),r=require("./printDeleteWarnLog");exports.dealMainField=function(e,a,o,s){let l=o.main;if(l||(l=o.types),l||(l=function(e,n){let i="";const r=t.FsBlocking.readdirSync(e);for(const e of r)if(n.includes(e.toLowerCase())){i=e;break}return i}(s,["index.js","index.ets","index.ts"]),l&&(0,n.printChangeWarnLog)(a,e,o.main,l)),!l)return;const u=function(e,n){const r=i.default.dirname(i.default.join(e,n));if(!t.FsBlocking.existsSync(r))return n;const a=t.FsBlocking.readdirSync(r),o=i.default.basename(i.default.join(e,n));for(let e=0;e<a.length;e++)if(a[e].startsWith(o))return n.replace(o,a[e]);return n}(s,l);if(u!==l&&((0,n.printChangeWarnLog)(a,e,l,u),l=u),o.main=l,!t.FsBlocking.existsSync(i.default.join(s,o.main)))return(0,r.printDeleteWarnLog)(a,e,o.main),void delete o.main;o.types&&o.types===o.main&&delete o.main};