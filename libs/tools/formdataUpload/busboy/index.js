"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.busboy=void 0;const e=require("./Utils"),t=require("./types/Multipart");exports.busboy=r=>{if("object"==typeof r&&null!==r||(r={}),"object"!=typeof r.headers||null===r.headers||"string"!=typeof r.headers["content-type"])throw new Error("Missing Content-Type");return function(r){const o=r.headers,s=e.Utils.parseContentType(o["content-type"]);if(!s)throw new Error("Malformed content type");const a={limits:r.limits,headers:o,conType:s,highWaterMark:void 0,fileHwm:void 0,defCharset:void 0,defParamCharset:void 0,preservePath:!1};if(r.highWaterMark&&(a.highWaterMark=r.highWaterMark),r.fileHwm&&(a.fileHwm=r.fileHwm),a.defCharset=r.defCharset,a.defParamCharset=r.defParamCharset,a.preservePath=r.preservePath,t.Multipart.detect(s))return new t.Multipart(a);throw new Error(`Unsupported content type: ${o["content-type"]}`)}(r)};