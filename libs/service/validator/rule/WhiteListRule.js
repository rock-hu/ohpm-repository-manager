"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WhiteListRule=void 0;const e=require("../../../packages/log"),t=require("./types");exports.WhiteListRule=class{constructor(e,t){this.whiteList=e,this.errorCallback=t}validate(r,i,s){s=s||i;const a=r.name;e.OhpmLazyLogger.debug(`start WhiteListRule.validate attribute "${s}" for package "${a}" in publishJson.`);const o=r[i];o&&!this.whiteList.includes(o)&&this.errorCallback(s,{attrName:s,ruleType:t.ValidationRuleType.NotNull,err:null,errorMsg:this.getErrorMsg(s,o,a),extInfo:{messageCN:this.getErrorMsgCN(s,o,a)}},a),e.OhpmLazyLogger.debug(`WhiteListRule.validate attribute "${s}" for package "${a}" in publishJson succeed.`)}getErrorMsg(e,t,r){return`attribute "${e}":"${t}" for package "${r}" in "oh-package.json5" not in the whiteList: ${JSON.stringify(this.whiteList)}.`}getErrorMsgCN(e,t,r){return`在包 "${r}" 的oh-package.json5文件中，字段 "${e}" 的值 "${t}" 不在白名单： ${JSON.stringify(this.whiteList)} 中`}};