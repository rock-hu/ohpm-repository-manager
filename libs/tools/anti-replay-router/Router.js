"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Router=void 0;const t=require("./Node");exports.Router=class{constructor(){this.roots=new Map}parsePattern(t){const s=t.split("/"),e=[];for(const t of s)if(t&&(e.push(t),t.startsWith("*")))break;return e}addRoute(s,e){const r=this.parsePattern(e);this.roots.has(s)||this.roots.set(s,new t.Node("",!1)),this.roots.get(s).insert(e,r,0)}getRoute(t,s){const e=this.parsePattern(s),r=new Map,o=this.roots.get(t);if(!o)return{node:null,params:r};const n=o.search(e,0);if(n){const t=this.parsePattern(n.pattern);for(const[s,o]of t.entries())if(o.startsWith(":"))r.set(o.substring(1),e[s]);else if(o.startsWith("*")&&o.length>1){r.set(o.substring(1),e.slice(s).join("/"));break}return{node:n,params:r}}return{node:null,params:r}}};