import{_ as f,l as k,E as N}from"./index.83aebd5f.js";import{a as w}from"./vue-router.779da2c0.js";import{b as L,_ as E,a as D}from"./icon-publisherName.ccbdcb76.js";import{o as r,c,S as y,T as R,U as u,a as s,_ as x,j as J,h as T,$ as z,ai as h,F as v,a8 as S,O as g,L as H,R as I,P as $,J as U,I as j,V as C,t as A,B as b,e as W,i as F,f as O,n as V}from"./@vue.405cd0f3.js";import{P as q}from"./Pagination.3cd17577.js";import"./axios.a3888612.js";import"./vue-i18n.b3f06251.js";import"./@intlify.54dd1442.js";import"./vue.44d375da.js";import"./element-plus.d9770c7f.js";import"./lodash-es.2c2c875c.js";import"./@vueuse.1b628eaa.js";import"./@popperjs.c75af06c.js";import"./@ctrl.86a38320.js";import"./dayjs.f9ab3a77.js";import"./clipboard.ce371577.js";import"./async-validator.bf8f818c.js";import"./memoize-one.297ddbcb.js";import"./normalize-wheel-es.54f5de6c.js";import"./@floating-ui.57eef0fc.js";import"./marked.710fa320.js";import"./xss.e4f2f0a8.js";import"./cssfilter.393cb597.js";import"./node-forge.4054bff5.js";import"./@element-plus.1b716427.js";import"./vuex.10212040.js";import"./highlight.js.504c3f6b.js";/* empty css                            */const B={props:{label:String,text:[String,Number],imgSrc:String}},G=["title"],K=["src"],M={class:"f-12-500-000 m-l-8"};function Q(t,i,e,l,o,d){return r(),c("div",{class:"f-14-400-808",title:e.text},[e.imgSrc?(r(),c("img",{key:0,src:e.imgSrc,alt:"",width:"18",height:"18",style:{"vertical-align":"bottom"}},null,8,K)):y("",!0),R(" "+u(e.label)+" ",1),s("span",M,u(e.text),1)],8,G)}const P=f(B,[["render",Q]]);const X={name:"template-list-item",props:{template:new L({}),index:Number},components:{LabelText:P},setup(t,i){const e=x({borderFlag:!0}),l=J(()=>["org","publisherName","version","publishTime","license"]),o=T().appContext.config.globalProperties,d=n=>{i.emit("handlejump",n)},p=n=>{if(n==="author"||n==="org"||n==="version"||n==="publishTime"||n==="license"||n==="publisherName")return P},m=(n,_)=>{const a={class:"message-item"};if(_===l.value.length-1&&_>2&&(a.class+=" p-absolute r--60-absolute "),a.style="margin-left:40px",a.class+=" versionList",n==="version")return{label:o.$t("detail.version"),text:`${t.template.latestVersion}(${k(t.template.latestPublishTime)})`,...a};if(n==="license")return a.style="font-size: 13px;margin-left:40px",a.class="publishTimeList",{text:t.template.license,...a};if(n==="org")return a.style="font-size: 14px;margin-left:0;",a.class="orgList",{imgSrc:t.template.authorPicUrl?`${t.template.authorPicUrl}`:E,text:t.template.org||t.template.authorName||"--",...a};if(n==="publisherName")return a.style="font-size: 14px;margin-left:40px",a.class="publisherNameList",t.template.publisherName?{imgSrc:D,text:t.template.publisherName,...a}:{}};return{...z(e),jump:d,currentView:p,currentProps:m,renderKeys:l}}},Y={class:"p-relative"},Z={class:"align-center authority-wrapper ellipsis"},ee=["name","title"],te=["title"],ne={class:"message w-100 align-center"};function ae(t,i,e,l,o,d){const p=h("el-button"),m=h("el-row");return r(),c("div",{class:"main-result w-100 p-relative pointer template",onClick:i[0]||(i[0]=n=>l.jump(e.template))},[s("div",Y,[s("div",null,[s("div",Z,[s("div",{name:`template_${e.index}`,title:e.template.name,class:"h-29 lh-29 pointer f-20-500-000 font-M ellipsis",style:{height:"24px"}},u(e.template.name),9,ee)]),s("div",{title:e.template.description,class:"h-21 lh-21 desc f-14-200-800 ellipsis"},u(e.template.description||""),9,te)]),s("div",ne,[(r(!0),c(v,null,S(l.renderKeys,(n,_)=>(r(),g(I(l.currentView(n)),H(l.currentProps(n,_),{key:n,class:"ellipsis",style:{"max-width":"200px",height:"18px"}}),null,16))),128))]),e.template.keywords&&e.template.keywords.length>0?(r(),g(m,{key:0,class:"m-t-8 m-b-24"},{default:$(()=>[(r(!0),c(v,null,S(e.template.keywords.slice(0,5),(n,_)=>(r(),g(p,{key:_,title:n,size:"default"},{default:$(()=>[R(u(n),1)]),_:2},1032,["title"]))),128))]),_:1})):y("",!0)])])}const se=f(X,[["render",ae],["__scopeId","data-v-5a2a25a4"]]);const oe={name:"template-list",props:{templates:Array},components:{"template-list-item":se},setup(t,i){return{handlejump:l=>{i.emit("handleRouterJump",l)}}}};function le(t,i,e,l,o,d){const p=h("template-list-item");return r(),c("div",null,[(r(!0),c(v,null,S(e.templates,(m,n)=>(r(),c("div",{class:U("list flex align-center"),key:n},[j(t.$slots,"default",{template:m},()=>[C(p,{template:m,index:n,onHandlejump:l.handlejump},null,8,["template","index","onHandlejump"])],!0)]))),128))])}const re=f(oe,[["render",le],["__scopeId","data-v-7617ab74"]]),ie=""+new URL("../img/empty.545ff08d.svg",import.meta.url).href;const ce={props:{passContent:String,totalSize:Number}},me={class:"empty"},pe={class:"content"},ue=s("img",{src:ie,alt:""},null,-1),de={class:"m-t-16"},_e=["title"];function he(t,i,e,l,o,d){return r(),c("div",me,[s("div",pe,[ue,s("p",de,[s("span",null,u(t.$t("search.tip",{totalSize:e.totalSize})),1),s("span",{class:"ellipsis tip",title:e.passContent},u(e.passContent),9,_e),s("span",null,u(t.$t("search.resources")),1)])])])}const ge=f(ce,[["render",he]]);const fe={props:{searchResult:{type:Array},handleCurrentChange:{type:Function},currentPage:[Number,String],pageSize:[Number,String],totalSize:Number,passContent:String,selectValue:String},components:{templateList:re,Pagination:q,Empty:ge},setup(t,i){return{handleAppJump:o=>{i.emit("handleAppJump",o)},handleOnChange:o=>{i.emit("handleOnChange",o)}}}},ye={class:"right"},ve={class:"serachTotal"},Se={class:"serachResultNums"},Ce={class:"serachList"},$e={class:"pagination mobileShow"};function be(t,i,e,l,o,d){const p=h("templateList"),m=h("Empty"),n=h("Pagination");return r(),c("div",ye,[s("div",ve,[s("div",Se,u(t.$t("search.tip",{totalSize:e.totalSize})),1)]),s("div",Ce,[e.totalSize!==0?(r(),g(p,{key:0,templates:e.searchResult,onHandleRouterJump:l.handleAppJump},null,8,["templates","onHandleRouterJump"])):(r(),g(m,{key:1,totalSize:e.totalSize,passContent:e.passContent},null,8,["totalSize","passContent"]))]),s("div",$e,[C(n,{name:"pagination",handleCurrentChange:e.handleCurrentChange,"current-page":e.currentPage,total:e.totalSize,"page-size":10},null,8,["handleCurrentChange","current-page","total"])])])}const Pe=f(fe,[["render",be],["__scopeId","data-v-6e57ac14"]]),Re=""+new URL("../img/kong.eabe03a2.png",import.meta.url).href;const xe={},ze={class:"empty"},ke={class:"content"},Ne=s("img",{src:Re,alt:""},null,-1),we={class:"m-t-16 nodata"},Le={class:"add"};function Ee(t,i,e,l,o,d){return r(),c("div",ze,[s("div",ke,[Ne,s("p",we,[s("span",null,u(t.$t("default.noData")),1),s("span",Le,u(t.$t("default.goCreate")),1)])])])}const De=f(xe,[["render",Ee]]);const Je=A({components:{ExploreHeadSearch:N,Right:Pe,NoData:De},setup(){const t=b("getUser"),i=b("loginUser").loginUser,e=x({searchResult:[],keyWord:"",currentPage:1,totalSize:0,origin:!0,isEmpty:""}),l=w(),o=W(null);F(()=>{const a=sessionStorage.getItem("loginFlag");e.keyWord&&(o.value.searchFlag=!1),!a&&i.id&&t&&t()}),O(()=>l.currentRoute.value,a=>{window.scrollTo(0,0),e.keyWord=a.query.q?decodeURIComponent(a.query.q):"",V(()=>{o.value&&o.value.searchPackage(e.keyWord)})},{immediate:!0});const d=a=>{o.value.sortedType=a,o.value.tempParams.currentPage=1,e.currentPage=1,o.value.searchPackage(e.keyWord)},p=()=>{e.currentPage=1},m=a=>{a.data===null?e.isEmpty=null:(e.searchResult=a.data,e.totalSize=a.total)},n=a=>{o.value.tempParams.currentPage=a,o.value.searchPackage(e.keyWord),e.currentPage=a},_=a=>{l.push({name:"latestDetail",params:{name:a.name},query:{id:a.id}})};return{...z(e),getSearchResult:m,handleCurrentChange:n,handleAppJump:_,handleOnChange:d,resetData:p,headSearch:o}}}),Te={key:0,class:"header"},He={class:"serachContent"};function Ie(t,i,e,l,o,d){const p=h("ExploreHeadSearch"),m=h("Right"),n=h("NoData");return r(),c("div",null,[t.isEmpty!==null?(r(),c("div",Te,[C(p,{ref:"headSearch",comeFrom:t.origin,keyWord:t.keyWord,onGetSearchResult:t.getSearchResult,onResetData:t.resetData},null,8,["comeFrom","keyWord","onGetSearchResult","onResetData"])])):y("",!0),s("div",He,[t.isEmpty!==null?(r(),g(m,{key:0,ref:"right",currentPage:t.currentPage,handleCurrentChange:t.handleCurrentChange,passContent:t.keyWord,searchResult:t.searchResult,totalSize:t.totalSize,class:"right",onHandleAppJump:t.handleAppJump,onHandleOnChange:t.handleOnChange},null,8,["currentPage","handleCurrentChange","passContent","searchResult","totalSize","onHandleAppJump","onHandleOnChange"])):y("",!0),t.isEmpty===null?(r(),g(n,{key:1})):y("",!0)])])}const ut=f(Je,[["render",Ie],["__scopeId","data-v-d51a22e2"]]);export{ut as default};
