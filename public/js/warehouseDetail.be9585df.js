import{B as oe}from"./Button.59bb2c30.js";import{t as ae,ai as h,aq as ie,o as m,c as v,a as n,V as s,P as l,Q as le,O as c,S as w,e as J,_ as ne,f as se,i as te,$ as re,T as f,U as p,a9 as z,K as _,J as pe,F as X,a8 as W,bm as de,bk as ue}from"./@vue.405cd0f3.js";import{i as me,j as fe,k as ce,l as x,u as he,m as ge,n as Ae}from"./warehouse.0f89570f.js";import{a as be}from"./vue-router.779da2c0.js";import{P as ke}from"./Pagination.3cd17577.js";import{C as Pe}from"./ConfirmDialog.f3308ea3.js";import{_ as ve,d as ye}from"./index.83aebd5f.js";import{s as Ce}from"./@element-plus.1b716427.js";import{a as A}from"./element-plus.d9770c7f.js";import"./FooterButtons.71958792.js";import"./axios.a3888612.js";import"./vue-i18n.b3f06251.js";import"./@intlify.54dd1442.js";import"./vue.44d375da.js";import"./marked.710fa320.js";import"./xss.e4f2f0a8.js";import"./clipboard.ce371577.js";import"./cssfilter.393cb597.js";import"./dayjs.f9ab3a77.js";import"./node-forge.4054bff5.js";import"./vuex.10212040.js";import"./highlight.js.504c3f6b.js";/* empty css                            */import"./lodash-es.2c2c875c.js";import"./@vueuse.1b628eaa.js";import"./@popperjs.c75af06c.js";import"./@ctrl.86a38320.js";import"./async-validator.bf8f818c.js";import"./memoize-one.297ddbcb.js";import"./normalize-wheel-es.54f5de6c.js";import"./@floating-ui.57eef0fc.js";function we(e){return/^(\d+)\.(\d+)\.(\d+)(-[0-9A-Za-z-]+(\.[0-9A-Za-z-]+)*)?(\+[0-9A-Za-z-]+(\.[0-9A-Za-z-]+)*)?$/.test(e)}function ee(e){return e?we(e)?"":`${e} ${$t("repository.semverCheckTip")}`:""}const Ve="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAMKADAAQAAAABAAAAMAAAAADbN2wMAAAFMUlEQVRoBd1aTWwbRRR+b9dt3CYppJhaiEP5iQAhFQ4UUQSHNm0RolSFQw5IFAkhBFyQ+IuAUw6IVkUClXvFodxygKr0QKP+iAt/4YAqVa3iCiqBkCPT0DppNiX2MN84Lxmv197Z2I1t5uCZ3X3vm+/NvPl7Y6YWJDX8+Lp84cpuT9EORfQAkRpUzAMaun8RvshKTRNxjokulJnOZDMbx3ns+7lmq9d4K0v/7NkycGPu332qrPYppqdIqfWJkJivs6KT7PGxtevWHLv1xDltYPKU2AC195H1+dmZt7lMI4qUtHDymi0NJi4qjw5le/s+5eO/XLc+xRadDVDDw/5U4dwruqVHNfE7YpFXIKAN+YuYRzdlthzhsbGSC4STAYWhh+9cKAdfa9/e6gLavAxPpLz0c5nTv/4ZhxVrQGHHg4+VVOmrm9Xq9QiiN3z2n8+cOf9jPRm89xp9zO+8/8UFtXB2tcmDE+pE3eDQiGPdHoCiKqmjjZRX6xv7vD976uKXUfVFGgC3gfVaIR2l1IZ3QYpT26PcqcYADNhSOfi5HW7TqGHMmPDSj4YHdtUYwFSJ2abTyMMwMybATXO0Da0ywMzzqzZV2jRcy2prheOy/JILYYWdKs7kOrH1l+nq3ZSeXjf19w3Kir3UA9geJCHvb76Xbhk9TD1P7LLxE5WhCwxguSZwBFeRNz2Ajdn87I3L+qPT3gYVbvzsKHkDt5Eqlejax+9RcPqEYDrl6Z3P0oYPDhH7PpWn/6Yrb+2n0uVLTrq6F4o9vWs3YwNoesDsKh3Jo4a+l9805FEGgQ0ffkLpoT14dEo2eSigIYDpmtDQ4Gx08YMtsasy5ILx46blRSeJETBUWl700YvATJKEMy8eRgpJ9/OGiG55kJcU504r0RHsmlyfJ/ShKOO/ke19RpN/qUYg5sXCb5NU+uN36nlyF7FXmQuQ4xnv8d1OLSVfAV4zOxf85I/clXldHwO32ZW5ll2NuAnkDUWPOJ+qnGFdKdfKyeyDgSzuJGNCpO1veBfnaqIXl4M757ffN6kLg3HCcd/DMwvkQRRJDEO5VeQNLlEuZaIHSpvQZApOfaPZKTOlCmHJBbqV5IEJ7hh9TouXkGiUw52wqEnL27KtJr+I3b+0lbAr66YyDCi2inDUbCPYMrAh08JU9CoRs+YhzSC2ZiIgwm1sd2q1EeCue4BzzdI3Lb+4MRMs8fnwmGitEZxL6e3oBT0HPS0VJ82j3EbIyxoBTHstECPw3pbBc5IE7v47d2d6tNILSRRF1pW864otuK65nkYPeIgS63BeongkKnAlL2SipljpCWAlTpXN3LiHEDeixEkAcJKyXQK6UW4TxjRGHBiJHNhJT3Ymsq25m3UAIe5wZY2e07v3rnh7gBX7WoQRwEyShLMxAPF5HNNcAWa++NwcAyHv0vJhXGOEtWLjSAlM1wSu4Ax5cxo5ODkVvHtPxtfBlyEXEHV1muZ/OGuOgrNHDtP8d9+6qFXJYGAvXLqoGfh09eD7zudhA+LxR5mT543b/3/CKibOoi8XqpqpEx80R4kJgZ4ZA8ITNyN6ZZ6Q587LeaLCcZnZkgvJq64O7sIIRH9xM6KLgRjVAXlgbmsirpyqXEiIIg6vLxVeled25+ASdTcAXpEG4ANuRHAzoovt7Img0e0MeNaMAby0U1df8sEQdJ2vb0ZWd3biCdRZz23sBq7rQrYQBnb29oe2MXuvIT5vf2tlGdioA3WFr5Lq1RPrQmHFrv2rQdiQrv2zR9gQPLfz7zb/AWWqyyHNvKYVAAAAAElFTkSuQmCC",Ue="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAGKADAAQAAAABAAAAGAAAAADiNXWtAAACDElEQVRIDbWVzU4CMRSFBxVlMDGoMW7VmBiiO1zqyhdgzQP4Tj6ArFm58gVYsCRgYsQ1bgzhZ1Qino9M60wpRBK5yUnbe0/P7bS3nSBYsWX+qB+KB7Ix/0vtKEbs8jeLEqxpykGMLf/04EP+txjfPs68BNsinwibvkke36d8L8LAja27Do13hVNhwxOb50JnX4hiWJ6bgJUjPu/L7ERPhzkFoSdwRlNjn43RZ1useKlUCvP5vB0bommJwTHjeC4aVtd25ORA7Z4zsV6vP3S73ftyuczKUoaPGBwnCRpozdiFPCUDre6y3+8/TWTD4fBZgjcmRh8fMThwTSxu0UoZn2nFTT8pZJL4fIbvtMmtC/acoE2WFByNRi9K1GHlJuG8efKjGZgq2lEfzFi73Y6azeajEl3ncrnjbDZbUKLXSqVyW6vV3mcm/Dq4E4PkIf+GPD0t2lZTJpOZeChel0lg69ZlaeWFarV6F4bhESuPoqjDl+Aj5vIT45Tmyg+ZxCstUxIcCrZ6dHmuxuNxjzqnkpIx+viIwYHrxNGamj04jTiPcyF1m1utVqSS9B4qT0WxWMw1Gg3+DcZ4WZvC9PlOJoDAY3cmuH5ifzEW8iRQolMz98CMOXmeXKpj2SSIdwReU2tuAgIkgMTF88XlnjG25VlIicNatErOhFcR/PsvU5op456ApX/6KZVVDH4AkxUPi+SYuesAAAAASUVORK5CYII=",Ie="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAABcUlEQVRYCe2XMU7DMBSGfxdYunfgDKysDDDC1AtwBCgDA0IsGWBgoL0CF2CCtQNiY+UMDCywdKOP99u1SEJaHCdEkciTrDiW7e/3/17aBPjvYaINOJMBZriz6/sY4sq8xewVJ8DBpxBsWajBC/rYjRFRXkAe7o8dKaLn1wdd03ACfbBPN2aYgnNKRLiAPJyW+2A/UkSYgCJ4uujYjxQRJoDVTotX5fmnCPeEeJeWXMMEAB8Kf/q10iliA3t2LvC+hFnj8JEI2CpEqAMVEKuXdgI6BzoHWuLAsdyDralI8dYtU7DfFDvPa0kKGj1+FuZSkB0LvzN40MmV/oyqCZiYg3C1xTNbUgMGr1bfSDaLddY46hkLpnNA8GwRgsMaUcVbecaC6WpgDdeYg/lM9AcJ+kp1i7FxrhRvU36UJ3fwRPefo6dMje8Pk5Gc64RE29/WBeHABSbmMiuAdyeyg0+cqqxtFVJvPTDntJ1u35hH4loRXwkJgRMbZ4teAAAAAElFTkSuQmCC";const Te=ae({components:{Search:Ce,ConfirmDialog:Pe,Button:oe,Pagination:ke},setup(){let e=J(null),a=J(null),$=J(null);const N=J(null),G=be(),o=ne({headStyle:{background:"#F5F5F5",color:"#000000"},headRowStyle:{height:"40px"},showAddDialog:!1,dialogVisible:!1,confirmShow:!1,loading:!1,currentPage:1,totalSize:0,pageSize:10,uploadPackageData:[],uploadPackageInfo:{name:"",description:"",version:"",license:"",author:"",keywords:""},fileInfo:{name:""},uploadModel:{file:""},colors:[{color:"#8CC983",percentage:0}],repoId:"",analyzePercent:0,uploadPercent:0,isUploadFailed:!1,isUploadFinished:!1,isShowProgress:!1,packageSize:"",dataItem:"",confirmTitle:"",operateType:"off",offModel:{reason:""},submitBtnLoading:!1,queryForm:{name:"",version:{minVersion:"",maxVersion:""},publisherName:"",author:"",publishTime:[]},popoverVisible:{name:!1,version:!1,publisherName:!1,author:!1,publishTime:!1},pickerOptions:{disabledDate(t){return t.getTime()>Date.now()}},batchUnPublishPackages:[],batchUnPublishFinished:!0,batchUnPublishDialogVisible:!1,batchUnPublishDialogVisibleDialogMsg:"",hasNoPermPkgTip:"",hasReferencedPkgTip:"",noPermPkg:[],referencedPkg:[],batchUnPublishBtnLoading:!1,batchUnPublishConfirmBtnLoading:!1,showDialogType:"single",selectedUnpublishPkg:[]}),Q=()=>{const t=[...o.noPermPkg,...o.referencedPkg];o.batchUnPublishPackages.filter(d=>{const u=`${d.name}@${d.version}`;return t.includes(u)}).forEach(d=>e.value.toggleRowSelection(d,!1)),o.batchUnPublishPackages=o.batchUnPublishPackages.filter(d=>{const u=`${d.name}@${d.version}`;return!t.includes(u)}),o.batchUnPublishDialogVisible=!1},g=()=>{if(o.batchUnPublishPackages.length===0)return;o.batchUnPublishBtnLoading=!0;const t=o.batchUnPublishPackages.map(r=>r.id);t.length!==0&&fe({ids:t}).then(r=>{r.code===200?(o.noPermPkg=r.data.unPermissionPackages,o.referencedPkg=r.data.existDependentsPackages,o.noPermPkg.length||o.referencedPkg.length?o.batchUnPublishDialogVisible=!0:L(o.batchUnPublishPackages,"batch")):A.error(r.message)}).catch(r=>{var d,u;((u=(d=r==null?void 0:r.response)==null?void 0:d.data)==null?void 0:u.code)===1249&&y(o.currentPage)}).finally(()=>{o.batchUnPublishBtnLoading=!1})},k=t=>{o.batchUnPublishPackages=t},T=()=>{o.dialogVisible=!0},P=t=>{o.isShowProgress=!0;const r=t.target.files[0];if(!/.har|.tgz$/g.test(r.name)){A.warning("文件类型不对，请上传.har或.tgz包"),o.isShowProgress=!1;return}o.fileInfo=r;let u=new FormData;if(u.append("file",r),r.size>o.packageSize*1024*1024){A.warning(`文件不能大于${o.packageSize}M`),o.isShowProgress=!1;return}let C={headers:{"Content-Type":"multipart/form-data;charset=UTF-8"},timeout:0,onUploadProgress:b=>{o.analyzePercent=parseInt(b.loaded/b.total*100)}};ce(o.repoId,u,C).then(b=>{b.code===200?Object.keys(b.data).length===0?(o.colors=[{color:"#E84026"}],o.isUploadFailed=!0):(o.isUploadFailed=!1,o.isUploadFinished=!0,o.isShowProgress=!1,o.uploadPackageInfo=b.data):A.error(b.message)}).catch(()=>{o.colors=[{color:"#E84026"}],o.isUploadFailed=!0,o.isUploadFinished=!0,o.isShowProgress=!0})},F=()=>{a.value.click()},V=t=>{t.stopPropagation(),o.analyzePercent=0,o.uploadPercent=0,o.colors=[{color:"#8CC983",percentage:0}],o.isUploadFailed=!1,o.isUploadFinished=!1,o.fileInfo={name:`.har or .tgz format,up to ${o.packageSize}MB`},o.uploadPackageInfo.name="",o.uploadPackageInfo.version="",o.uploadPackageInfo.description="",o.uploadPackageInfo.license="",o.uploadPackageInfo.author="",o.uploadPackageInfo.keywords=""},U=()=>{o.dialogVisible=!1,o.fileInfo={name:`.har or .tgz format,up to ${o.packageSize}MB`},o.submitBtnLoading=!1,o.analyzePercent=0,o.uploadPercent=0,o.isUploadFailed=!1,o.uploadPackageInfo.name="",o.uploadPackageInfo.version="",o.uploadPackageInfo.description="",o.uploadPackageInfo.license="",o.uploadPackageInfo.author="",o.uploadPackageInfo.keywords="",o.isUploadFinished=!1},q=(t,r=!1)=>{if(!t)return"";const d=new Date(t);return r?d.setHours(23,59,59,999):d.setHours(0,0,0,0),d.getTime()},I=()=>{var r,d;const t={id:o.repoId,pageSize:o.pageSize,currentPage:o.currentPage,packageName:o.queryForm.name,packageMinVersion:o.queryForm.version.minVersion,packageMaxVersion:o.queryForm.version.maxVersion,packagePublisherName:o.queryForm.publisherName,packageAuthorName:o.queryForm.author,packagePublishStartTime:q((r=o.queryForm.publishTime)==null?void 0:r[0]),packagePublishEndTime:q((d=o.queryForm.publishTime)==null?void 0:d[1],!0)};N.value?N.value.validateField("version",u=>{u&&x(t).then(C=>{if(C.code===200){const{total:b,data:Y}=C.data;o.uploadPackageData=Y,o.totalSize=b}else A.error(C.message)})}):x(t).then(u=>{if(u.code===200){const{total:C,data:b}=u.data;o.uploadPackageData=b,o.totalSize=C}else A.error(u.message)})},Z=t=>{o.popoverVisible[t]=!1,I()},O=t=>{o.popoverVisible[t]=!1},y=t=>{o.currentPage=t,I()},E=t=>{o.pageSize=t,I({id:o.repoId,pageSize:o.pageSize,currentPage:o.currentPage})},M={file:[{required:!0}]},R={reason:[{required:!0,trigger:"blur",validator:(t,r,d)=>r.length===0?d(new Error(i18n("repository.unPublishReasonNotNull"))):r.length<2||r.length>256?d(new Error(i18n("repository.unPublishReasonErrorTip"))):d()}]},D={version:[{trigger:"blur",required:!1,validator:(t,r,d)=>{const{minVersion:u,maxVersion:C}=r,b=ee(u),Y=ee(C);return b?d(new Error(b)):Y?d(new Error(Y)):d()}}]},H=()=>{if(!o.fileInfo.size){A.warning("文件为空，请重新上传");return}if(o.isUploadFailed===!0){A.warning("文件解析失败，请重新上传");return}let t=new FormData;const r={name:o.uploadPackageInfo.name||"",description:o.uploadPackageInfo.description||"",version:o.uploadPackageInfo.version||"",license:o.uploadPackageInfo.license||"",author:o.uploadPackageInfo.author||"",keywords:o.uploadPackageInfo.keywords||""};t.append("packageInfo",JSON.stringify(r)),t.append("file",o.fileInfo);let d={headers:{"Content-Type":"multipart/form-data;charset=UTF-8"},timeout:0,onUploadProgress:u=>{o.uploadPercent=Math.max(0,parseInt(u.loaded/u.total*100)-1)}};o.submitBtnLoading=!0,he(o.repoId,t,d).then(u=>{u.code===200?(A.success("上传成功"),I()):A.error(u.message)}).finally(()=>U())},L=(t,r)=>{if(o.showDialogType=r,o.selectedUnpublishPkg=t,!(r==="batch"&&t.length===0)){if(o.dataItem=t,o.operateType=r,o.offModel.reason="",r==="single")o.confirmTitle=i18n("notification.confirmTitle4",{name:t.name});else if(r==="batch"){const d=t.map(u=>`${u.name}@${u.version}`);o.confirmTitle=i18n("notification.confirmTitle3",{names:d.join(", ")})}else throw new Error(`operate type "${r}" error, only support single and batch`);o.confirmShow=!0}},i=()=>{o.confirmShow=!1,o.dataItem=""},B=()=>{if(o.batchUnPublishConfirmBtnLoading=!0,o.operateType==="single")j(o.dataItem.id);else if(o.operateType==="batch"){if(!o.batchUnPublishFinished){A.warning("请等待批量下架完成"),o.batchUnPublishConfirmBtnLoading=!1;return}K(o.dataItem.map(t=>t.id))}else throw o.batchUnPublishConfirmBtnLoading=!1,new Error(`operate type "${o.operateType}" error, only support single and batch`)},K=t=>{$.value.validate(r=>{if(r){o.batchUnPublishFinished=!1;const d={ids:t,reason:o.offModel.reason};ge(d).then(u=>{u.code===200?A.success("批量下架成功"):A.error(u.message)}).finally(()=>{o.batchUnPublishConfirmBtnLoading=!1,o.offModel.reason="",o.confirmShow=!1,o.batchUnPublishFinished=!0,y(o.currentPage)})}else o.batchUnPublishConfirmBtnLoading=!1})},j=t=>{$.value.validate(r=>{if(r){const d={id:t,reason:o.offModel.reason};Ae(d).then(u=>{u.code===200?A.success("下架成功"):A.error(u.message)}).finally(()=>{o.batchUnPublishConfirmBtnLoading=!1,o.offModel.reason="",o.confirmShow=!1,y(o.currentPage)})}else o.batchUnPublishConfirmBtnLoading=!1})};return se(()=>G.currentRoute.value,t=>{t.query.id&&(o.repoId=t.query.id,I())},{immediate:!0}),te(()=>{me().then(t=>{t.code===200?(o.packageSize=t.data.packageSize,o.fileInfo={name:`.har or .tgz format,up to ${t.data.packageSize}MB`}):A.error(t.message)})}),{...re(o),openUploadDialog:T,uploadPackage:P,uploadToInput:F,packageTableRef:e,inputRef:a,formRea:$,filterFormRef:N,handleClose:U,getThirdPackageData:I,handleCurrentChange:y,handleSizeChange:E,rules:M,offRules:R,saveEdit:H,closeFile:V,batchShelf:K,singleShelf:j,showDialog:L,onClose:i,onConfirm:B,dateFormat:ye,filterRule:D,handleSelectionChange:k,batchUnPublish:g,handleFilterConfirm:Z,handleFilterCancel:O,handleUnselectPkg:Q}}}),S=e=>(de("data-v-08e921c3"),e=e(),ue(),e),Fe={class:"thirdPackage"},De={class:"ohpm-title"},Se={class:"title"},Re={class:"thirdPackageList"},Be={class:"column-header-wrapper"},ze=S(()=>n("span",{class:"filter-title"},"Name",-1)),$e={class:"popover-panel"},Ne={class:"panel-btn"},qe={class:"column-header-wrapper"},Ee=S(()=>n("span",{class:"filter-title"},"Version",-1)),Me={class:"popover-panel"},Le={class:"version-range"},Ke={class:"version-seprator"},Ye={class:"panel-btn"},Je={class:"column-header-wrapper"},Qe=S(()=>n("span",{class:"filter-title"},"Publisher",-1)),Ze={class:"popover-panel"},Oe={class:"panel-btn"},He={class:"column-header-wrapper"},Xe=S(()=>n("span",{class:"filter-title"},"Author",-1)),We={class:"popover-panel"},Ge={class:"panel-btn"},je={class:"column-header-wrapper"},_e=S(()=>n("span",{class:"filter-title"},"PublishTime",-1)),xe={class:"popover-panel"},eo={class:"panel-btn"},oo=["onClick"],ao={class:"pagination"},io={class:"uploadDialog"},lo={key:0,class:"uploadFailed font-M"},no=S(()=>n("img",{alt:"",src:Ve,style:{"vertical-align":"middle",width:"24px",height:"24px"}},null,-1)),so={class:"font-L upFile"},to={class:"upload-image-container"},ro=["placeholder"],po={class:"preview"},uo=S(()=>n("div",{class:"action"},[n("img",{alt:"",class:"pointer",src:Ie})],-1)),mo={class:"packageInfo"},fo=["title"],co={class:"packageInfo"},ho=["title"],go={class:"packageInfo"},Ao=["title"],bo={class:"packageInfo"},ko=["title"],Po={class:"packageInfo"},vo=["title"],yo={class:"packageInfo"},Co=["title"],wo={class:"content"},Vo={key:0,class:"has-noPerm-pkg-tip"},Uo={class:"title"},Io={class:"tip"},To={key:1,class:"has-noPerm-pkg-tip"},Fo={class:"title"},Do={class:"tip"},So={class:"content"},Ro={key:0,class:"has-noPerm-pkg-tip"},Bo={class:"title"},zo={class:"tip"},$o={key:1,class:"has-referenced-pkg-tip"},No={class:"title"},qo={class:"tip"},Eo={class:"dialog-footer"};function Mo(e,a,$,N,G,o){const Q=h("Button"),g=h("el-button"),k=h("el-table-column"),T=h("Filter"),P=h("el-icon"),F=h("Check"),V=h("el-input"),U=h("el-popover"),q=h("el-date-picker"),I=h("el-table"),Z=h("el-pagination"),O=h("el-progress"),y=h("el-form-item"),E=h("el-form"),M=h("el-dialog"),R=h("el-tag"),D=h("el-tooltip"),H=h("ConfirmDialog"),L=ie("loading");return m(),v("div",Fe,[n("div",De,[n("div",Se,[s(Q,{isPrimary:!0,text:e.$t("repository.uploadPackage"),class:"add-btn f-12-Light",onClick:e.openUploadDialog},null,8,["text","onClick"]),s(g,{disabled:e.batchUnPublishPackages.length===0,loading:e.batchUnPublishBtnLoading,class:"batchUnPublish",type:"primary",onClick:e.batchUnPublish},{default:l(()=>[f(p(e.$t("repository.batchUnPublish")),1)]),_:1},8,["disabled","loading","onClick"])])]),n("div",Re,[le((m(),c(I,{ref:"packageTableRef",border:!0,data:e.uploadPackageData,"empty-text":e.$t("detail.nodata"),"header-cell-style":e.headStyle,"header-row-style":e.headRowStyle,onSelectionChange:e.handleSelectionChange},{default:l(()=>[s(k,{type:"selection",width:"60"}),s(k,{label:"Name","min-width":"150",prop:"name",resizable:"","show-overflow-tooltip":""},{header:l(()=>[n("div",Be,[ze,s(U,{visible:e.popoverVisible.name,placement:"bottom","popper-class":"repo-detail-filter-popover",width:"230"},{reference:l(()=>[e.queryForm.name?(m(),c(P,{key:1,class:"filter-icon",onClick:a[1]||(a[1]=i=>e.popoverVisible.name=!e.popoverVisible.name)},{default:l(()=>[s(F)]),_:1})):(m(),c(P,{key:0,class:"filter-icon",onClick:a[0]||(a[0]=i=>e.popoverVisible.name=!e.popoverVisible.name)},{default:l(()=>[s(T)]),_:1}))]),default:l(()=>[n("div",$e,[s(V,{modelValue:e.queryForm.name,"onUpdate:modelValue":a[2]||(a[2]=i=>e.queryForm.name=i),placeholder:e.$t("repository.filterNameInputTip"),class:"panel-input",clearable:"",onClear:e.getThirdPackageData,onKeydown:z(e.getThirdPackageData,["native","enter"])},null,8,["modelValue","placeholder","onClear","onKeydown"]),n("div",Ne,[s(g,{plain:"",onClick:a[3]||(a[3]=i=>e.handleFilterCancel("name"))},{default:l(()=>[f(p(e.$t("button.cancel")),1)]),_:1}),s(g,{type:"primary",onClick:a[4]||(a[4]=i=>e.handleFilterConfirm("name"))},{default:l(()=>[f(p(e.$t("button.confirm")),1)]),_:1})])])]),_:1},8,["visible"])])]),_:1}),s(k,{label:"Version",prop:"version","show-overflow-tooltip":"",width:"100"},{header:l(()=>[n("div",qe,[Ee,s(U,{visible:e.popoverVisible.version,placement:"bottom","popper-class":"repo-detail-filter-popover",width:"230"},{reference:l(()=>[!e.queryForm.version.minVersion&&!e.queryForm.version.maxVersion?(m(),c(P,{key:0,class:"filter-icon",onClick:a[5]||(a[5]=i=>e.popoverVisible.version=!e.popoverVisible.version)},{default:l(()=>[s(T)]),_:1})):(m(),c(P,{key:1,class:"filter-icon",onClick:a[6]||(a[6]=i=>e.popoverVisible.version=!e.popoverVisible.version)},{default:l(()=>[s(F)]),_:1}))]),default:l(()=>[n("div",Me,[n("div",Le,[s(V,{modelValue:e.queryForm.version.minVersion,"onUpdate:modelValue":a[7]||(a[7]=i=>e.queryForm.version.minVersion=i),placeholder:e.$t("repository.filterMinVersionInputTip"),clearable:"",maxlength:"30",onClear:e.getThirdPackageData,onKeyup:z(e.getThirdPackageData,["enter","native"])},null,8,["modelValue","placeholder","onClear","onKeyup"]),n("div",Ke,p(e.$t("repository.to")),1),s(V,{modelValue:e.queryForm.version.maxVersion,"onUpdate:modelValue":a[8]||(a[8]=i=>e.queryForm.version.maxVersion=i),placeholder:e.$t("repository.filterMaxVersionInputTip"),clearable:"",maxlength:"30",onClear:e.getThirdPackageData,onKeyup:z(e.getThirdPackageData,["enter","native"])},null,8,["modelValue","placeholder","onClear","onKeyup"])]),n("div",Ye,[s(g,{plain:"",onClick:a[9]||(a[9]=i=>e.handleFilterCancel("version"))},{default:l(()=>[f(p(e.$t("button.cancel")),1)]),_:1}),s(g,{type:"primary",onClick:a[10]||(a[10]=i=>e.handleFilterConfirm("version"))},{default:l(()=>[f(p(e.$t("button.confirm")),1)]),_:1})])])]),_:1},8,["visible"])])]),_:1}),s(k,{label:"Description","min-width":"150",prop:"description","show-overflow-tooltip":""}),s(k,{label:"License",prop:"license","show-overflow-tooltip":"",width:"100"}),s(k,{label:"Publisher",prop:"publisherName","show-overflow-tooltip":"",width:"150"},{header:l(()=>[n("div",Je,[Qe,s(U,{visible:e.popoverVisible.publisherName,placement:"bottom","popper-class":"repo-detail-filter-popover",width:"230"},{reference:l(()=>[e.queryForm.publisherName?(m(),c(P,{key:1,class:"filter-icon",onClick:a[12]||(a[12]=i=>e.popoverVisible.publisherName=!e.popoverVisible.publisherName)},{default:l(()=>[s(F)]),_:1})):(m(),c(P,{key:0,class:"filter-icon",onClick:a[11]||(a[11]=i=>e.popoverVisible.publisherName=!e.popoverVisible.publisherName)},{default:l(()=>[s(T)]),_:1}))]),default:l(()=>[n("div",Ze,[s(V,{modelValue:e.queryForm.publisherName,"onUpdate:modelValue":a[13]||(a[13]=i=>e.queryForm.publisherName=i),placeholder:e.$t("repository.filterPublisherInputTip"),class:"panel-input",clearable:"",onClear:e.getThirdPackageData,onKeydown:z(e.getThirdPackageData,["native","enter"])},null,8,["modelValue","placeholder","onClear","onKeydown"]),n("div",Oe,[s(g,{plain:"",onClick:a[14]||(a[14]=i=>e.handleFilterCancel("publisherName"))},{default:l(()=>[f(p(e.$t("button.cancel")),1)]),_:1}),s(g,{type:"primary",onClick:a[15]||(a[15]=i=>e.handleFilterConfirm("publisherName"))},{default:l(()=>[f(p(e.$t("button.confirm")),1)]),_:1})])])]),_:1},8,["visible"])])]),_:1}),s(k,{label:"Author",prop:"author","show-overflow-tooltip":"",width:"150"},{header:l(()=>[n("div",He,[Xe,s(U,{visible:e.popoverVisible.author,placement:"bottom","popper-class":"repo-detail-filter-popover",width:"230"},{reference:l(()=>[e.queryForm.author?(m(),c(P,{key:1,class:"filter-icon",onClick:a[17]||(a[17]=i=>e.popoverVisible.author=!e.popoverVisible.author)},{default:l(()=>[s(F)]),_:1})):(m(),c(P,{key:0,class:"filter-icon",onClick:a[16]||(a[16]=i=>e.popoverVisible.author=!e.popoverVisible.author)},{default:l(()=>[s(T)]),_:1}))]),default:l(()=>[n("div",We,[s(V,{modelValue:e.queryForm.author,"onUpdate:modelValue":a[18]||(a[18]=i=>e.queryForm.author=i),placeholder:e.$t("repository.filterAuthorInputTip"),class:"panel-input",clearable:"",onClear:e.getThirdPackageData,onKeydown:z(e.getThirdPackageData,["native","enter"])},null,8,["modelValue","placeholder","onClear","onKeydown"]),n("div",Ge,[s(g,{plain:"",onClick:a[19]||(a[19]=i=>e.handleFilterCancel("author"))},{default:l(()=>[f(p(e.$t("button.cancel")),1)]),_:1}),s(g,{type:"primary",onClick:a[20]||(a[20]=i=>e.handleFilterConfirm("author"))},{default:l(()=>[f(p(e.$t("button.confirm")),1)]),_:1})])])]),_:1},8,["visible"])])]),_:1}),s(k,{label:"PublishTime",prop:"publishTime","show-overflow-tooltip":"",width:"180"},{header:l(()=>[n("div",je,[_e,s(U,{visible:e.popoverVisible.publishTime,placement:"bottom","popper-class":"repo-detail-filter-popover",width:"230"},{reference:l(()=>{var i,B;return[!((i=e.queryForm.publishTime)!=null&&i[0])&&!((B=e.queryForm.publishTime)!=null&&B[1])?(m(),c(P,{key:0,class:"filter-icon",onClick:a[21]||(a[21]=K=>e.popoverVisible.publishTime=!e.popoverVisible.publishTime)},{default:l(()=>[s(T)]),_:1})):(m(),c(P,{key:1,class:"filter-icon",onClick:a[22]||(a[22]=K=>e.popoverVisible.publishTime=!e.popoverVisible.publishTime)},{default:l(()=>[s(F)]),_:1}))]}),default:l(()=>[n("div",xe,[s(q,{modelValue:e.queryForm.publishTime,"onUpdate:modelValue":a[23]||(a[23]=i=>e.queryForm.publishTime=i),"end-placeholder":e.$t("repository.filterEndPublishTimeInputTip"),"picker-options":e.pickerOptions,"range-separator":e.$t("repository.to"),"start-placeholder":e.$t("repository.filterStartPublishTimeInputTip"),class:"publish-time","popper-class":"repo-detail-filter-publish-time",type:"daterange","unlink-panels":"",onChange:e.getThirdPackageData},null,8,["modelValue","end-placeholder","picker-options","range-separator","start-placeholder","onChange"]),n("div",eo,[s(g,{plain:"",onClick:a[24]||(a[24]=i=>e.handleFilterCancel("publishTime"))},{default:l(()=>[f(p(e.$t("button.cancel")),1)]),_:1}),s(g,{type:"primary",onClick:a[25]||(a[25]=i=>e.handleFilterConfirm("publishTime"))},{default:l(()=>[f(p(e.$t("button.confirm")),1)]),_:1})])])]),_:1},8,["visible"])])]),default:l(i=>[n("span",null,p(e.dateFormat(i.row.publishTime)),1)]),_:1}),s(k,{label:"Keyword","min-width":"150",prop:"keywords","show-overflow-tooltip":""}),s(k,{fixed:"right",label:"操作",width:"120"},{default:l(i=>[n("span",{class:"pointer operate",onClick:B=>e.showDialog(i.row,"single")},p(e.$t("repository.unPublish")),9,oo)]),_:1})]),_:1},8,["data","empty-text","header-cell-style","header-row-style","onSelectionChange"])),[[L,e.loading]]),n("div",ao,[e.totalSize>0?(m(),c(Z,{key:0,"current-page":e.currentPage,"onUpdate:currentPage":a[26]||(a[26]=i=>e.currentPage=i),"page-size":e.pageSize,"onUpdate:pageSize":a[27]||(a[27]=i=>e.pageSize=i),"hide-on-single-page":e.pageSize===10,"page-sizes":[10,20,50,100],total:e.totalSize,background:"",layout:"sizes, total, prev, pager, next, jumper",onSizeChange:e.handleSizeChange,onCurrentChange:e.handleCurrentChange},null,8,["current-page","page-size","hide-on-single-page","total","onSizeChange","onCurrentChange"])):w("",!0)])]),n("div",io,[s(M,{modelValue:e.dialogVisible,"onUpdate:modelValue":a[33]||(a[33]=i=>e.dialogVisible=i),"before-close":e.handleClose,"close-on-click-modal":!1,"destroy-on-close":"",width:"640px"},{header:l(()=>[n("div",{style:_({"padding-bottom":e.isUploadFailed?"":"24px"}),class:"dialog-title font-M"},p(e.$t("repository.uploadPackage")),5),e.isUploadFailed?(m(),v("div",lo,[no,f(" "+p(e.$t("repository.uploadAgain")),1)])):w("",!0)]),default:l(()=>[s(E,{ref:"formRef",model:e.uploadModel,rules:e.rules,"label-position":"top"},{default:l(()=>[s(y,{prop:"file"},{label:l(()=>[n("span",so,p(e.$t("repository.uploadHar")),1)]),default:l(()=>[e.isShowProgress?(m(),c(O,{key:0,color:e.colors,percentage:e.analyzePercent},null,8,["color","percentage"])):w("",!0),n("div",to,[e.isUploadFinished?w("",!0):(m(),v("input",{key:0,ref:"inputRef",placeholder:`.har or .tgz format,up to ${e.packageSize}MB`,accept:"har,tgz",class:"input-ref",type:"file",onChange:a[28]||(a[28]=(...i)=>e.uploadPackage&&e.uploadPackage(...i))},null,40,ro)),n("div",{class:"input-append",onClick:a[30]||(a[30]=(...i)=>e.uploadToInput&&e.uploadToInput(...i))},[n("div",po,[n("div",{style:_({color:e.fileInfo.size?"#000":"rgba(0, 0, 0, 0.25)"}),class:"image-name ellipsis"},[f(p(e.fileInfo.name)+" ",1),e.isUploadFinished?(m(),v("img",{key:0,alt:"",class:"close pointer",src:Ue,onClick:a[29]||(a[29]=(...i)=>e.closeFile&&e.closeFile(...i))})):w("",!0)],4)]),uo])])]),_:1}),s(y,null,{label:l(()=>[n("p",mo,[f(" Name: "),n("span",{title:e.uploadPackageInfo.name,class:"m-l-10"},p(e.uploadPackageInfo.name),9,fo)]),n("p",co,[f(" Version: "),n("span",{title:e.uploadPackageInfo.version,class:"m-l-10"},p(e.uploadPackageInfo.version),9,ho)]),n("p",go,[f(" Description: "),n("span",{title:e.uploadPackageInfo.description,class:"m-l-10"},p(e.uploadPackageInfo.description),9,Ao)]),n("p",bo,[f(" License: "),n("span",{title:e.uploadPackageInfo.license,class:"m-l-10"},p(e.uploadPackageInfo.license),9,ko)]),n("p",Po,[f(" Author: "),n("span",{title:e.uploadPackageInfo.author,class:"m-l-10"},p(e.uploadPackageInfo.author),9,vo)]),n("p",yo,[f(" Keyword: "),n("span",{title:e.uploadPackageInfo.keywords,class:"m-l-10"},p(e.uploadPackageInfo.keywords),9,Co)])]),_:1}),s(y,null,{default:l(()=>[s(g,{class:"btnCancal",onClick:a[31]||(a[31]=i=>e.handleClose(e.formRef))},{default:l(()=>[f(p(e.$t("button.cancel")),1)]),_:1}),s(g,{class:pe(["btnColor",e.isUploadFinished?"":"disabled"]),disabled:!e.isUploadFinished,loading:e.submitBtnLoading,onClick:a[32]||(a[32]=i=>e.saveEdit(e.formRef))},{default:l(()=>[f(p(e.$t("button.submit"))+p(e.submitBtnLoading?`(${e.uploadPercent}%)`:""),1)]),_:1},8,["class","disabled","loading"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","before-close"])]),s(H,{batchUnPublishConfirmBtnLoading:e.batchUnPublishConfirmBtnLoading,buttonStyle:!0,visible:e.confirmShow,class:"confirm-unpublish-dialog",onOnClose:e.onClose,onOnConfirm:e.onConfirm},{content:l(()=>[n("div",wo,[e.showDialogType==="single"?(m(),v("div",Vo,[n("div",Uo,p(e.$t("notification.confirmTitle5")),1),n("div",Io,[s(D,{content:`${e.selectedUnpublishPkg.name}`,class:"box-item",effect:"dark",placement:"top"},{default:l(()=>[(m(),c(R,{key:`${e.selectedUnpublishPkg.name}`,"disable-transitions":!1,class:"mx-1 ellipsis"},{default:l(()=>[f(p(`${e.selectedUnpublishPkg.name}`),1)]),_:1}))]),_:1},8,["content"])])])):w("",!0),e.showDialogType==="batch"?(m(),v("div",To,[n("div",Fo,p(e.$t("notification.confirmTitle5")),1),n("div",Do,[(m(!0),v(X,null,W(e.batchUnPublishPackages,i=>(m(),c(D,{content:`${i.name}@${i.version}`,class:"box-item",effect:"dark",placement:"top"},{default:l(()=>[(m(),c(R,{key:`${i.name}@${i.version}`,"disable-transitions":!1,class:"mx-1 ellipsis"},{default:l(()=>[f(p(`${i.name}@${i.version}`),1)]),_:2},1024))]),_:2},1032,["content"]))),256))])])):w("",!0)]),s(E,{ref:"formRea",model:e.offModel,rules:e.offRules,class:"formRea"},{default:l(()=>[s(y,{prop:"reason"},{default:l(()=>[s(V,{modelValue:e.offModel.reason,"onUpdate:modelValue":a[34]||(a[34]=i=>e.offModel.reason=i),placeholder:e.$t("repository.inputUnPublishReason"),maxlength:"256",rows:"2","show-word-limit":"",type:"textarea"},null,8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["batchUnPublishConfirmBtnLoading","visible","onOnClose","onOnConfirm"]),s(M,{modelValue:e.batchUnPublishDialogVisible,"onUpdate:modelValue":a[36]||(a[36]=i=>e.batchUnPublishDialogVisible=i),title:e.$t("repository.notes"),class:"remove-package-dialog",width:"600"},{footer:l(()=>[n("div",Eo,[s(g,{onClick:a[35]||(a[35]=i=>e.batchUnPublishDialogVisible=!1)},{default:l(()=>[f(p(e.$t("button.cancel")),1)]),_:1}),s(g,{type:"primary",onClick:e.handleUnselectPkg},{default:l(()=>[s(D,{content:e.$t("repository.oneClickReleaseTip"),effect:"dark",placement:"top"},{default:l(()=>[f(p(e.$t("repository.oneClickRelease")),1)]),_:1},8,["content"])]),_:1},8,["onClick"])])]),default:l(()=>[n("div",So,[e.noPermPkg.length?(m(),v("div",Ro,[n("div",Bo,p(e.$t("repository.hasNoPermPkgTip"))+":",1),n("div",zo,[(m(!0),v(X,null,W(e.noPermPkg,i=>(m(),c(D,{content:i,class:"box-item",effect:"dark",placement:"top"},{default:l(()=>[(m(),c(R,{key:i,"disable-transitions":!1,class:"mx-1 ellipsis"},{default:l(()=>[f(p(i),1)]),_:2},1024))]),_:2},1032,["content"]))),256))])])):w("",!0),e.referencedPkg.length?(m(),v("div",$o,[n("div",No,p(e.$t("repository.hasReferencedPkgTip"))+":",1),n("div",qo,[(m(!0),v(X,null,W(e.referencedPkg,i=>(m(),c(D,{content:i,class:"box-item",effect:"dark",placement:"top"},{default:l(()=>[(m(),c(R,{key:i,"disable-transitions":!1,class:"mx-1 ellipsis"},{default:l(()=>[f(p(i),1)]),_:2},1024))]),_:2},1032,["content"]))),256))])])):w("",!0)])]),_:1},8,["modelValue","title"])])}const Aa=ve(Te,[["render",Mo],["__scopeId","data-v-08e921c3"]]);export{Aa as default};
