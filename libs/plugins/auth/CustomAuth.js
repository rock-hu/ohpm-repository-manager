"use strict";var t=this&&this.__awaiter||function(t,n,i,e){return new(i||(i=Promise))((function(u,o){function s(t){try{a(e.next(t))}catch(t){o(t)}}function r(t){try{a(e.throw(t))}catch(t){o(t)}}function a(t){var n;t.done?u(t.value):(n=t.value,n instanceof i?n:new i((function(t){t(n)}))).then(s,r)}a((e=e.apply(t,n||[])).next())}))},n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.CustomAuth=void 0;const i=require("../../packages/config/config"),e=n(require("path")),u=require("../../common/Constants");class o{constructor(t){this.authPlugin=t}static getInstance(){return o.Instance||(o.Instance=this.initAuth()),o.Instance}static initAuth(){const t=i.config.auth_plugin.path,n=i.config.auth_plugin.name;let s;s=e.default.isAbsolute(t)?t:e.default.join(u.Constants.WORK_DIR,t);const r=new(require(s)[n]);return new o(r)}auth(n){return t(this,void 0,void 0,(function*(){const t=yield this.authPlugin.auth(n);return{id:null==t?void 0:t.id,name:null==t?void 0:t.name,belongGroupList:null==t?void 0:t.belongGroupList,groupAdminList:null==t?void 0:t.groupAdminList,isAuthPlugin:!0}}))}getUserInfo(n){return t(this,void 0,void 0,(function*(){return yield this.authPlugin.getUserInfo(n)}))}}exports.CustomAuth=o;