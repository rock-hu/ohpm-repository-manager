"use strict";var r=this&&this.__awaiter||function(r,e,o,t){return new(o||(o=Promise))((function(i,n){function d(r){try{c(t.next(r))}catch(r){n(r)}}function u(r){try{c(t.throw(r))}catch(r){n(r)}}function c(r){var e;r.done?i(r.value):(e=r.value,e instanceof o?e:new o((function(r){r(e)}))).then(d,u)}c((t=t.apply(r,e||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.uplinkRepository=void 0;const e=require("../../packages/definitions/types"),o=require("../../common/DbFactory"),t=require("../../common/RepoError"),i=require("../../common");class n{insert(e){return r(this,void 0,void 0,(function*(){try{return o.commonDB.insertOne(n.TABLE_NAME,e)}catch(r){throw new t.RepoServerError(i.ErrorCode.SaveUplinkError,"Fail to insert uplink!",r)}}))}getList(d={},u=1,c=5){return r(this,void 0,void 0,(function*(){const r={filter:d,pick:["id","name","description","url"],orderBy:{keyList:["create_time"],orderList:[e.OrderType.DESC]},pageQuery:{pageNum:u,pageSize:c}};try{return o.commonDB.findByFilter(n.TABLE_NAME,r)}catch(r){throw new t.RepoServerError(i.ErrorCode.FindUplinkError,"Fail to find uplink!",r)}}))}updateById(e){return r(this,void 0,void 0,(function*(){try{return o.commonDB.updateById(n.TABLE_NAME,e.getId(),e)}catch(r){throw new t.RepoServerError(i.ErrorCode.UpdateUplinkError,"Fail to update uplink!",r)}}))}findById(e){return r(this,void 0,void 0,(function*(){try{return o.commonDB.findById(n.TABLE_NAME,e)}catch(r){throw new t.RepoServerError(i.ErrorCode.FindUplinkError,`Fail to find uplink whose id is "${e}"!`,r)}}))}deletedById(e){return r(this,void 0,void 0,(function*(){try{return o.commonDB.deleteById(n.TABLE_NAME,e)}catch(r){throw new t.RepoServerError(i.ErrorCode.DeleteUplinkError,`Fail to delete uplink whose id is "${e}"!`,r)}}))}}n.TABLE_NAME="uplink",exports.uplinkRepository=new n;