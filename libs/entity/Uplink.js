"use strict";var e=this&&this.__decorate||function(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s},t=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Uplink=exports.UPLINK_NAME_REGEX=void 0;const r=require("./BaseData"),i=require("../common/CommonValidator"),n=require("../service/uplinks/UrlUtil"),o=require("../common/RepoError"),s=require("../common"),a=require("typeorm");exports.UPLINK_NAME_REGEX=/^[a-z_-]{1,30}$/;let l=class extends r.BaseData{constructor(e){super(e),e&&(this.name=e.name,this.description=e.description,this.url=e.url,this.checkAllFields())}setName(e){this.name=e}setDescription(e){this.description=e}setUrl(e){this.url=e}getName(){return this.name}getDescription(){return this.description}getUrl(){return this.url}checkAllFields(){if(!this.name||!exports.UPLINK_NAME_REGEX.test(this.name))throw new o.RepoClientError(s.ErrorCode.InvalidUplinkName,`Invalid parameter: ${this.name} - the uplink's name contains 1 to 30 characters, including only lowercase letters, underscores (_), and hyphens (-).`);i.CommonValidator.checkSQLAndXSSInject("name",this.name),i.CommonValidator.checkLength(s.ErrorCode.InvalidDescriptionLength,"description",this.description,512,1),i.CommonValidator.checkAllSpace(s.ErrorCode.InvalidSpaceDescription,"description",this.description),i.CommonValidator.checkSQLAndXSSInject("description",this.description),i.CommonValidator.checkLength(s.ErrorCode.InvalidUrlLength,"url",this.url,512,1),i.CommonValidator.checkSQLAndXSSInject("url",this.url),this.url=n.UrlUtil.parseUrl("url",this.url)}};e([(0,a.Column)({type:"varchar",length:32}),t("design:type",String)],l.prototype,"name",void 0),e([(0,a.Column)({type:"varchar",length:1024,nullable:!0}),t("design:type",String)],l.prototype,"description",void 0),e([(0,a.Column)({type:"varchar",length:1024}),t("design:type",String)],l.prototype,"url",void 0),l=e([(0,a.Entity)("uplink"),t("design:paramtypes",[Object])],l),exports.Uplink=l;