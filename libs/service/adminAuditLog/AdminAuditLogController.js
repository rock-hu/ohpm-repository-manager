"use strict";var t=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(r,o){function s(t){try{c(n.next(t))}catch(t){o(t)}}function u(t){try{c(n.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,u)}c((n=n.apply(t,e||[])).next())}))},e=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.AdminAuditLogController=void 0;const i=e(require("express")),n=require("../../common"),r=require("../../common/RepoResponse"),o=require("./AdminAuditLogService"),s=require("./AuditLogDataSearchFilter");class u{static getInstance(){return this.Instance||(this.Instance=new u(o.adminAuditLogService),this.Instance.initRouter()),this.Instance}constructor(t){this.basePath="/api/audit",this.router=i.default.Router(),this.service=t}initRouter(){this.router.get("",n.SessionUtil.check,n.CsrfToken.validate,this.getAuditLogList)}getAuditLogList(e,i,n){return t(this,void 0,void 0,(function*(){try{const t=new s.AuditLogDataSearchFilter(e.query),n=yield o.adminAuditLogService.getAdminAuditLogListByFilter(e.ctx.userId,t);r.RepoResponse.success(i,n)}catch(t){n(t)}}))}}exports.AdminAuditLogController=u;