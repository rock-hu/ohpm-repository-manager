"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RegExpRule=void 0;const e=require("./types"),r=require("../../../packages/log"),t=require("../../../utils/CommonConstants");exports.RegExpRule=class{constructor(e,r){this.regEx=e,this.errorCallback=r}validate(t,o,a){a=a||o;const s=t.name;r.OhpmLazyLogger.debug(`start RegExpRule.validate attribute "${a}" for package "${s}" in publishJson.`);const g=t[o];g&&!this.regEx.test(g)&&this.errorCallback(a,{attrName:a,ruleType:e.ValidationRuleType.NotNull,err:null,errorMsg:this.getErrorMsg(a,s),extInfo:{messageCN:this.getErrorMsgCN(a,s)}},s),r.OhpmLazyLogger.debug(`RegExpRule.validate attribute "${a}" for package "${s}" in publishJson succeed.`)}getErrorMsg(e,r){return this.regEx.source===new RegExp(t.NAME_CONTAIN_GROUP_REGEX).source?`the format of the attribute "${e}" for package "${r}" in oh-package.json5 must contain group.`:`the format of the attribute "${e}" for package "${r}" in oh-package.json5 invalid.`}getErrorMsgCN(e,r){return this.regEx.source===new RegExp(t.NAME_CONTAIN_GROUP_REGEX).source?`在包 "${r}" 的oh-package.json5文件中，字段 "${e}" 缺少组织`:`在包 "${r}" 的oh-package.json5文件中，字段 "${e}" 格式非法`}};