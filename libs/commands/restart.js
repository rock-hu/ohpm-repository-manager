"use strict";var e=this&&this.__awaiter||function(e,t,o,r){return new(o||(o=Promise))((function(n,s){function i(e){try{u(r.next(e))}catch(e){s(e)}}function c(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,c)}u((r=r.apply(e,t||[])).next())}))},t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.restartCmd=void 0;const o=require("./start"),r=require("./stop"),n=require("../packages/log"),s=require("../packages/config/config"),i=t(require("log4js"));exports.restartCmd=function(){return e(this,void 0,void 0,(function*(){try{yield(0,s.updateLogPathFromEnv)()}catch(e){(0,n.consoleError)(`server fail to restart: ${e}.`),i.default.shutdown((()=>process.exit(1)))}try{yield(0,r.stopExecute)(),(0,n.consoleInfo)('stop "ohpm-repo" successfully.')}catch(e){(0,n.consoleInfo)(`fail to stop "ohpm-repo": ${e.message}.`)}yield(0,o.startExecute)()}))};