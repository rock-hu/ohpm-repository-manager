"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BaseRuleHandler=void 0;const t=require("../../common/RepoError"),e=require("../../common");exports.BaseRuleHandler=class{constructor(t){this.rule=t}isObjectAttr(t){return"object"==typeof t&&!Array.isArray(t)&&null!==t}validate(t,e,r){const i=e.split(".");i.length>1?this.validateObject(t,i):(this.rule&&this.rule.validate(t,e,r),this.next&&this.next.validate(t,e,r))}validateObject(r,i){for(let s=0;s<i.length-1;s++){if(!this.isObjectAttr(r[i[s]])){const r=`attribute "${i[s]}" in oh-package.json5 is not an object.`;throw new t.RepoClientError(e.ErrorCode.UnexpectedError,r)}r=r[i[s]]}const s=i[i.length-1],n=i.join(".");this.rule&&this.rule.validate(r,s,n),this.next&&this.next.validate(r,s,n)}setNext(t){this.next=t}getNext(){return this.next}getTail(){if(!this.next)return this;let t=this.next;for(;t.getNext();)t=t.getNext();return t}};