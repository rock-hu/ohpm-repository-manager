"use strict";var e=this&&this.__awaiter||function(e,i,s,o){return new(s||(s=Promise))((function(r,n){function t(e){try{a(o.next(e))}catch(e){n(e)}}function c(e){try{a(o.throw(e))}catch(e){n(e)}}function a(e){var i;e.done?r(e.value):(i=e.value,i instanceof s?i:new s((function(e){e(i)}))).then(t,c)}a((o=o.apply(e,i||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.PermissionChecker=void 0;const i=require("../../../user/UserService");exports.PermissionChecker=class{check(i,s){return e(this,void 0,void 0,(function*(){const e=[];for(const o of i.pkgMap.values()){const i=o.versions;if(i)for(const r of i)e.push(this.checkPermission(o.repoName,o.packageName,r,s));else e.push(this.checkPermission(o.repoName,o.packageName,void 0,s))}yield Promise.all(e)}))}checkPermission(s,o,r,n){return e(this,void 0,void 0,(function*(){yield i.userService.validOprPermission(s,o,r,n,!0)}))}};