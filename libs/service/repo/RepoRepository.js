"use strict";var r=this&&this.__awaiter||function(r,e,o,t){return new(o||(o=Promise))((function(n,i){function c(r){try{u(t.next(r))}catch(r){i(r)}}function d(r){try{u(t.throw(r))}catch(r){i(r)}}function u(r){var e;r.done?n(r.value):(e=r.value,e instanceof o?e:new o((function(r){r(e)}))).then(c,d)}u((t=t.apply(r,e||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.repoRepository=void 0;const e=require("../../common/DbFactory"),o=require("../../common/RepoError"),t=require("../../common");class n{insert(i){return r(this,void 0,void 0,(function*(){try{return e.commonDB.insertOne(n.TABLE_NAME,i)}catch(r){throw new o.RepoServerError(t.ErrorCode.SaveRepoError,`Fail to insert repo "${i}"!`,r)}}))}getList(i={},c=1,d=1){return r(this,void 0,void 0,(function*(){const r={filter:i,pageQuery:{pageNum:c,pageSize:d}};try{return e.commonDB.findByFilter(n.TABLE_NAME,r)}catch(r){throw new o.RepoServerError(t.ErrorCode.FindRepoError,"Fail to find repo!",r)}}))}findById(i){return r(this,void 0,void 0,(function*(){try{return e.commonDB.findById(n.TABLE_NAME,i)}catch(r){throw new o.RepoServerError(t.ErrorCode.FindRepoError,`Fail to find repo whose id is ${i}!`,r)}}))}updateById(i){return r(this,void 0,void 0,(function*(){try{return e.commonDB.updateById(n.TABLE_NAME,i.getId(),i)}catch(r){throw new o.RepoServerError(t.ErrorCode.UpdateRepoError,`Fail to update repo "${i}"!`,r)}}))}}n.TABLE_NAME="repo",exports.repoRepository=new n;